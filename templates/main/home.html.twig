{% extends 'base.html.twig' %}

    {% block javascripts %}
    {% block importmap %}{{ importmap('app') }}{% endblock %}
        <script>
            function handleClick(element) {
                element.style.transition = "width 0.1s, height 0.1s";
                element.style.width = "0";
                element.style.height = "0";
        
                setTimeout(function () {
                    if (element.classList.contains('liked')) {
                        element.src = "{{ asset('/img/heart.png') }}";
                        element.classList.remove('liked')
                    } else {
                        element.src = "{{ asset('/img/heart_full.png') }}";
                        element.classList.add('liked')
                    }
                    element.style.width = "40px";
                    element.style.height = "40px";
                }, 100);
            }
        </script>
    {% endblock %}

{% block title %}Olympus Blogus{% endblock %}

{% block body %}
<div class="main">
    <div class="cards">
        {% for post in posts %}
            {# <form action="{{ path('app_post_details', {'post_id': post.id})}}"> #}
            <a class="card" href='{{ path('app_post_details', {'post_id': post.id})}}'>
                <img class="image" src='{{post.img}}'/>
                <div class="content">
                    <h1 class="title">
                        {{post.title}}
                    </h1>

                    <p class="desc">
                        {{post.text}}
                    </p>

                    <div class="actions">
                        <div class="comment">
                            <img class="img_comment" src='{{ asset('/img/tablets.png') }}' alt=""/>
                        </div>
                        <div class="like">
                            <img class="img_like" onclick=handleClick(this) src='{{ asset('/img/heart.png') }}' alt=""/>
                            <p class="nbr_likes">{{post.likes}}</p>
                        </div>
                    </div>
                </div>
            </a>
            {# </form> #}
        {% endfor %}
    </div>
</div>
{% endblock %}
